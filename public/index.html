<!-- public/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Walmart â€” AI Grocery Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header class="navbar">
  <div class="brand">
    <span class="spark" aria-hidden="true">âœ³</span>
    <span class="brand-main">Walmart</span>
  </div>

  <div class="nav-right">
    <button class="nav-btn" id="infoBtn" type="button">Info</button>
    <button class="nav-btn" type="button">Cart</button>
    <button class="nav-btn" type="button">Checkout</button>
  </div>
</header>

<main class="container">
  <section class="hero">
    <div class="hero-top">
      <button class="tagline-upload" id="uploadBtn" type="button">Upload grocery list</button>
      <input id="fileInput" class="hidden" type="file" accept=".txt,.pdf,.png,.jpg,.jpeg" />
    </div>

    <picture class="hero-picture">
      <source srcset="walmart_mock_mobile.png" media="(max-width: 640px)" />
      <img src="walmart_mock_.png" alt="Walmart mock" />
    </picture>

    <div class="upload-note" id="uploadNote" aria-live="polite"></div>
  </section>

  <section class="stage">
    <button class="halo-btn" id="startBtn" type="button" aria-label="Tap to Talk">
      <span class="halo r1" aria-hidden="true"></span>
      <span class="halo r2" aria-hidden="true"></span>
      <span class="halo r3" aria-hidden="true"></span>
      <span class="halo-label">Tap to Talk</span>
    </button>

    <button class="stop-btn hidden" id="stopBtn" type="button">Pause</button>
  </section>

  <section class="quiet">
    <form class="quiet-form" id="quietForm">
      <input class="quiet-input" id="quietInput" placeholder="Type here for privacyâ€¦" autocomplete="off" />
      <button class="pill send-btn" type="submit">Send</button>
      <button class="pill mic-btn" type="button" id="micBtn" title="Mic (demo)">ğŸ™ï¸</button>
      <button class="pill ghost" type="button" id="humanBtn">Contact human</button>
    </form>

    <div class="thread" id="thread"></div>
  </section>
</main>

<!-- Info modal -->
<div class="modal hidden" id="infoModal" role="dialog" aria-modal="true" aria-labelledby="infoTitle">
  <div class="modal-content">
    <h2 id="infoTitle">About VoxTalk</h2>
    <p>This is the Walmart-style voice + quiet text assistant demo. (UI-only stub.)</p>
    <button class="pill send-btn" id="closeInfo" type="button">Close</button>
  </div>
</div>

<a class="corner-btn left" href="/api/health" target="_blank" rel="noreferrer">Health</a>
<a class="corner-btn right" href="#" id="helpBtn">Help</a>

<script>
  const startBtn = document.getElementById("startBtn");
  const stopBtn  = document.getElementById("stopBtn");
  const thread   = document.getElementById("thread");

  const infoBtn   = document.getElementById("infoBtn");
  const infoModal = document.getElementById("infoModal");
  const closeInfo = document.getElementById("closeInfo");

  const uploadBtn  = document.getElementById("uploadBtn");
  const fileInput  = document.getElementById("fileInput");
  const uploadNote = document.getElementById("uploadNote");

  function add(who, text){
    const d = document.createElement("div");
    d.className = "msg " + who;
    d.textContent = text;
    thread.appendChild(d);
    thread.scrollTop = thread.scrollHeight;
  }

  // Voice button (UI stub)
  startBtn.onclick = () => {
    startBtn.disabled = true;
    stopBtn.classList.remove("hidden");
    add("bot","ğŸ™ï¸ Voice started (demo)");
  };

  stopBtn.onclick = () => {
    startBtn.disabled = false;
    stopBtn.classList.add("hidden");
    add("bot","â¸ï¸ Paused");
  };

  // Info modal
  function closeModal(){
    infoModal.classList.add("hidden");
    document.body.style.overflow = "";
  }
  infoBtn.onclick = () => {
    infoModal.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  };
  closeInfo.onclick = closeModal;
  infoModal.onclick = (e) => { if (e.target === infoModal) closeModal(); };

  // Quiet chat (UI stub)
  document.getElementById("quietForm").onsubmit = (e) => {
    e.preventDefault();
    const v = document.getElementById("quietInput").value.trim();
    if(!v) return;
    add("user", v);
    document.getElementById("quietInput").value = "";
    add("bot", "Got it (demo)");
  };

  document.getElementById("humanBtn").onclick = () => add("bot","Connecting to a human (demo) â€¦");
  document.getElementById("micBtn").onclick   = () => add("bot","Mic pressed (demo) â€¦");

  // Upload (UI stub)
  uploadBtn.onclick = () => fileInput.click();
  fileInput.onchange = () => {
    const f = fileInput.files && fileInput.files[0];
    if (!f) return;
    uploadNote.textContent = `Loaded: ${f.name} (demo â€” not processed yet)`;
    add("bot", `ğŸ“ Grocery list uploaded: ${f.name} (demo)`);
  };

  // Help
  document.getElementById("helpBtn").onclick = (e) => {
    e.preventDefault();
    add("bot","Try: â€œBuild a $50 grocery listâ€ (demo)");
  };
</script>

</body>
</html>
